<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dice Roller</title>
    <script
            src="https://code.jquery.com/jquery-3.5.1.js"
            integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
            crossorigin="anonymous"></script>
</head>
<body>
<script>
    var timesClicked = 0;

    function count() {
        timesClicked++;
        let counter = "Roll count: " + timesClicked;
        $('#counter').html(counter);
    }

    function renderRoll(rolls, container) {
        let parsed = '<b>';
        let i = 0;

        for (i; i < rolls.length-1; i++) {
            parsed += '<em style="color:' + rolls[i]["color"] + ';">';
            parsed += rolls[i]["result"];
            parsed += '</em>';
            if (i+1 < rolls.length-1) {
                parsed += ' + ';
            }
        }
        parsed += '</b><h1>= <em style="color:' + rolls[i]["color"] + ';">' + rolls[i]["result"] + '</em></h1>';

        container.html(parsed);
    }

    function roll(count, dice) {

        let data = {
            "count": count,
            "dice": dice
        };

        $.ajax({
            type: "POST",
            url: "/roll",
            data: JSON.stringify(data),
            success: function (response) {
                renderRoll(response, $('#roll'))
            },
            error: function (errmsg) {
                alert(errmsg.responseText);
            },
            dataType: "json",
            contentType: "application/json"
        });
    }
</script>
<div>
    <input type="text" id="count">
    <input type="text" id="dice">
    <button onclick="roll($('#count').val(), $('#dice').val()); count();">Roll</button>
    <span id="counter"></span>
</div>
<div id="roll">
</div>
</body>
</html>